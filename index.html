<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìì·¨ë°© í›„ë³´ ë¦¬ìŠ¤íŠ¸ (Live)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        /* [ê¸°ì¡´ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€] */
        :root { --primary-color: #0087D1; --primary-dark: #006096; --text-color: #333; --bg-color: #f4f9fc; --white: #fff; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Pretendard', sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-color); }
        
        .hero { background: linear-gradient(135deg, var(--primary-color), #6dd5fa); color: var(--white); text-align: center; padding: 6rem 1rem 5rem 1rem; }
        .container { max-width: 900px; margin: -3rem auto 2rem auto; padding: 0 1rem; position: relative; }
        
        /* ë™ì ìœ¼ë¡œ ìƒì„±ë  ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        section { background: var(--white); padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-top: 5px solid var(--primary-color); }
        .house-header { border-bottom: 2px solid #e0f0ff; padding-bottom: 1rem; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .house-header h2 { color: var(--primary-dark); font-size: 1.5rem; }
        .price-tag { background-color: var(--primary-color); color: white; padding: 0.4rem 1rem; border-radius: 20px; font-weight: bold; font-size: 0.95rem; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1.5rem; }
        @media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } }
        
        .info-item h3 { font-size: 1.1rem; margin-bottom: 0.5rem; color: #555; }
        .info-item ul { list-style-type: none; }
        .info-item li { margin-bottom: 0.3rem; position: relative; padding-left: 1.2rem; }
        .info-item li::before { content: "âœ”"; color: var(--primary-color); position: absolute; left: 0; font-weight: bold; }
        
        .gallery img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #ddd; }
        
        .map-area { width: 100%; height: 300px; background: #e9ecef; border-radius: 10px; border: 1px solid #ddd; }
        
        /* ë¡œë”© í‘œì‹œ */
        #loading { text-align: center; padding: 2rem; font-size: 1.2rem; color: #666; }
    </style>
</head>
<body>

    <div class="hero">
        <h1>ğŸ¡ ìì·¨ë°© í›„ë³´ ë¦¬ìŠ¤íŠ¸</h1>
        <p>ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ìì·¨ë°© í›„ë³´ë“¤ì…ë‹ˆë‹¤.</p>
    </div>

    <div class="container">
        <div id="house-list-container">
            <div id="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
        </div>
    </div>

    <footer>
        <p>Data from Google Sheets &copy; 2026</p>
    </footer>

    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ë°œê¸‰ë°›ì€_Javascript_í‚¤"></script>

    <script>
        // 1. êµ¬ê¸€ ì‹œíŠ¸ ì£¼ì†Œ (ì•„ê¹Œ ë„£ì€ ì˜¬ë°”ë¥¸ ì£¼ì†Œ ìœ ì§€)
        const googleSheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQfzBEtkuKzAt5KSlG6w0hFIN-SUJhxOaNqg2dZaoBY7cj2915CodbuP0C_tRi5rBZJ8ry5siN8aGN7/pub?output=csv";

        window.onload = function() {
            Papa.parse(googleSheetUrl, {
                download: true,
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    console.log("ì´ ë°ì´í„° ê°œìˆ˜:", results.data.length);
                    displayHouses(results.data);
                }
            });
        };

        function displayHouses(data) {
            const container = document.getElementById('house-list-container');
            container.innerHTML = ''; 

            let count = 0;

            data.forEach((house, index) => {
                if(!house.ì´ë¦„ || house.ì´ë¦„.trim() === "") return;

                count++;

                // ì´ë¯¸ì§€ ì²˜ë¦¬
                let imageUrl = house.ì´ë¯¸ì§€URL;
                if(!imageUrl || imageUrl.trim() === "") {
                    imageUrl = "https://placehold.co/600x400?text=No+Image";
                }

                const htmlContent = `
                    <section>
                        <div class="house-header">
                            <h2>${count}. ${house.ì´ë¦„}</h2>
                            <span class="price-tag">${house.ê°€ê²©}</span>
                        </div>
                        <div class="gallery">
                            <img src="${imageUrl}" alt="${house.ì´ë¦„}" 
                                 onerror="this.src='https://placehold.co/600x400?text=Error';">
                        </div>
                        <div class="info-grid">
                            <div class="info-item">
                                <h3>ğŸ“ ê¸°ë³¸ ì •ë³´</h3>
                                <ul>
                                    <li><strong>ì£¼ì†Œ:</strong> ${house.ì£¼ì†Œ}</li>
                                    <li><strong>í¬ê¸°:</strong> ${house.í¬ê¸°}</li>
                                    <li><strong>ì¸µìˆ˜:</strong> ${house.ì¸µìˆ˜}</li>
                                </ul>
                            </div>
                            <div class="info-item">
                                <h3>âœ¨ íŠ¹ì§•</h3>
                                <ul>
                                    <li>ğŸ‘ ${house.ì¥ì }</li>
                                    <li>ğŸ‘ ${house.ë‹¨ì }</li>
                                </ul>
                            </div>
                        </div>
                        <div id="map-${index}" class="map-area">
                            <p style="text-align:center; padding-top:130px; color:#999;">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                        </div>
                    </section>
                `;

                container.insertAdjacentHTML('beforeend', htmlContent);

                // [ìˆ˜ì •ëœ ë¶€ë¶„] ì•ˆì „ì¥ì¹˜ ì¶”ê°€: ì§€ë„ê°€ ì‹¤íŒ¨í•´ë„ ë‹¤ìŒ ì§‘ì„ ë³´ì—¬ì¤Œ
                if(house.ìœ„ë„ && house.ê²½ë„) {
                    setTimeout(() => {
                        loadMap(`map-${index}`, house.ìœ„ë„, house.ê²½ë„);
                    }, 500); // 0.5ì´ˆ ë’¤ì— ì§€ë„ ë¡œë”© ì‹œë„
                }
            });
        }

        // [ìˆ˜ì •ëœ ë¶€ë¶„] ì§€ë„ê°€ ì—†ì–´ë„ ë©ˆì¶”ì§€ ì•Šê²Œ ë°©ì–´ ì½”ë“œ ì‘ì„±
        function loadMap(elementId, lat, lng) {
            // ì¹´ì¹´ì˜¤ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì¤‘ë‹¨ (ì—ëŸ¬ ë‚´ì§€ ì•ŠìŒ)
            if (typeof kakao === 'undefined' || !kakao.maps) {
                console.error("ì¹´ì¹´ì˜¤ ì§€ë„ APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
                document.getElementById(elementId).innerHTML = "<p style='text-align:center; padding-top:130px; color:red;'>ì§€ë„ ë¡œë”© ì‹¤íŒ¨ (API í‚¤ í™•ì¸ í•„ìš”)</p>";
                return;
            }

            try {
                var container = document.getElementById(elementId);
                var options = {
                    center: new kakao.maps.LatLng(lat, lng),
                    level: 3
                };
                var map = new kakao.maps.Map(container, options);
                
                var markerPosition  = new kakao.maps.LatLng(lat, lng); 
                var marker = new kakao.maps.Marker({ position: markerPosition });
                marker.setMap(map);
            } catch (error) {
                console.error("ì§€ë„ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
            }
        }
    </script>
</body>
</html>





