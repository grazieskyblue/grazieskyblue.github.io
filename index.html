<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìì·¨ë°© í›„ë³´ ë¦¬ìŠ¤íŠ¸ (Live)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        /* [ê¸°ì¡´ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€] */
        :root { --primary-color: #0087D1; --primary-dark: #006096; --text-color: #333; --bg-color: #f4f9fc; --white: #fff; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Pretendard', sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-color); }
        
        .hero { background: linear-gradient(135deg, var(--primary-color), #6dd5fa); color: var(--white); text-align: center; padding: 6rem 1rem 5rem 1rem; }
        .container { max-width: 900px; margin: -3rem auto 2rem auto; padding: 0 1rem; position: relative; }
        
        /* ë™ì ìœ¼ë¡œ ìƒì„±ë  ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        section { background: var(--white); padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-top: 5px solid var(--primary-color); }
        .house-header { border-bottom: 2px solid #e0f0ff; padding-bottom: 1rem; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .house-header h2 { color: var(--primary-dark); font-size: 1.5rem; }
        .price-tag { background-color: var(--primary-color); color: white; padding: 0.4rem 1rem; border-radius: 20px; font-weight: bold; font-size: 0.95rem; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1.5rem; }
        @media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } }
        
        .info-item h3 { font-size: 1.1rem; margin-bottom: 0.5rem; color: #555; }
        .info-item ul { list-style-type: none; }
        .info-item li { margin-bottom: 0.3rem; position: relative; padding-left: 1.2rem; }
        .info-item li::before { content: "âœ”"; color: var(--primary-color); position: absolute; left: 0; font-weight: bold; }
        
        .gallery img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #ddd; }
        
        .map-area { width: 100%; height: 300px; background: #e9ecef; border-radius: 10px; border: 1px solid #ddd; }
        
        /* ë¡œë”© í‘œì‹œ */
        #loading { text-align: center; padding: 2rem; font-size: 1.2rem; color: #666; }
    </style>
</head>
<body>

    <div class="hero">
        <h1>ğŸ¡ ìì·¨ë°© í›„ë³´ ë¦¬ìŠ¤íŠ¸</h1>
        <p>ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ìì·¨ë°© í›„ë³´ë“¤ì…ë‹ˆë‹¤.</p>
    </div>

    <div class="container">
        <div id="house-list-container">
            <div id="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
        </div>
    </div>

    <footer>
        <p>Data from Google Sheets &copy; 2026</p>
    </footer>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ë°œê¸‰ë°›ì€_Javascript_í‚¤"></script>

    <script>
        // 1. ì—¬ê¸°ì— ì•„ê¹Œ ë³µì‚¬í•œ 'ì›¹ì— ê²Œì‹œ > CSV' ë§í¬ë¥¼ ë„£ìœ¼ì„¸ìš”.
        const googleSheetUrl = "ì—¬ê¸°ì—_ë³µì‚¬í•œ_CSV_ë§í¬ë¥¼_ë¶™ì—¬ë„£ìœ¼ì„¸ìš”";

        // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ì‹¤í–‰
        window.onload = function() {
            Papa.parse(googleSheetUrl, {
                download: true,
                header: true, // ì²« ì¤„ì„ ë³€ìˆ˜ëª…(Key)ìœ¼ë¡œ ì‚¬ìš©
                complete: function(results) {
                    displayHouses(results.data);
                }
            });
        };

        function displayHouses(data) {
            const container = document.getElementById('house-list-container');
            container.innerHTML = ''; // ë¡œë”© ë©”ì‹œì§€ ì‚­ì œ

            data.forEach((house, index) => {
                // ë¹ˆ ì¤„ì´ ë“¤ì–´ì˜¤ëŠ” ê²½ìš° ë°©ì§€
                if(!house.ì´ë¦„) return; 

                // 2. HTML í…œí”Œë¦¿ ìƒì„± (ë°±í‹± `` ì‚¬ìš©)
                // ì‹œíŠ¸ì˜ ì»¬ëŸ¼ëª…(house.ì´ë¦„, house.ê°€ê²© ë“±)ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
                const htmlContent = `
                    <section>
                        <div class="house-header">
                            <h2>${index + 1}. ${house.ì´ë¦„}</h2>
                            <span class="price-tag">${house.ê°€ê²©}</span>
                        </div>

                        <div class="gallery">
                            <img src="${house.ì´ë¯¸ì§€URL}" alt="${house.ì´ë¦„} ì‚¬ì§„" onerror="this.src='https://via.placeholder.com/800x200?text=No+Image'">
                        </div>

                        <div class="info-grid">
                            <div class="info-item">
                                <h3>ğŸ“ ê¸°ë³¸ ì •ë³´</h3>
                                <ul>
                                    <li><strong>ì£¼ì†Œ:</strong> ${house.ì£¼ì†Œ}</li>
                                    <li><strong>í¬ê¸°:</strong> ${house.í¬ê¸°}</li>
                                    <li><strong>ì¸µìˆ˜:</strong> ${house.ì¸µìˆ˜}</li>
                                </ul>
                            </div>
                            <div class="info-item">
                                <h3>âœ¨ ì¥ë‹¨ì  ë° íŠ¹ì§•</h3>
                                <ul>
                                    <li>ğŸ‘ <strong>ì¥ì :</strong> ${house.ì¥ì }</li>
                                    <li>ğŸ‘ <strong>ë‹¨ì :</strong> ${house.ë‹¨ì }</li>
                                </ul>
                            </div>
                        </div>

                        <div id="map-${index}" class="map-area"></div>
                    </section>
                `;

                // HTML ì‚½ì…
                container.insertAdjacentHTML('beforeend', htmlContent);

                // 3. ì§€ë„ ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ (ìœ„ë„, ê²½ë„ ë°ì´í„°ê°€ ìˆì„ ë•Œë§Œ)
                if(house.ìœ„ë„ && house.ê²½ë„) {
                    loadMap(`map-${index}`, house.ìœ„ë„, house.ê²½ë„);
                }
            });
        }

        // ì§€ë„ ë„ìš°ëŠ” í•¨ìˆ˜
        function loadMap(elementId, lat, lng) {
            var container = document.getElementById(elementId);
            var options = {
                center: new kakao.maps.LatLng(lat, lng),
                level: 3
            };
            var map = new kakao.maps.Map(container, options);
            
            // ë§ˆì»¤ ì¶”ê°€
            var markerPosition  = new kakao.maps.LatLng(lat, lng); 
            var marker = new kakao.maps.Marker({ position: markerPosition });
            marker.setMap(map);
        }
    </script>
</body>
</html>
